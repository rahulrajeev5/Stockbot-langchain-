{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Rahul/OneDrive/Desktop/beatsquare/frontend/pages/index.tsx"],"sourcesContent":["// pages/index.tsx\r\nimport { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { TextField, Button, Typography, Box, Card, CardContent } from \"@mui/material\";\r\n\r\nexport default function Home() {\r\n  const [urls, setUrls] = useState([\"\", \"\", \"\"]);\r\n  const [question, setQuestion] = useState(\"\");\r\n  const [answer, setAnswer] = useState(\"\");\r\n  const [sources, setSources] = useState<string[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [progress, setProgress] = useState<string[]>([]);\r\n\r\n\r\n  // Handle URL input change\r\n  const handleUrlChange = (index: number, value: string) => {\r\n    const newUrls = [...urls];\r\n    newUrls[index] = value;\r\n    setUrls(newUrls);\r\n  };\r\n\r\n  // Call FastAPI to process URLs and build FAISS index\r\nconst processUrls = async () => {\r\n  setLoading(true);\r\n  setProgress([\"Data Loading...Started..\"]);\r\n\r\n  try {\r\n    const res = await axios.post(\"http://localhost:8000/process-urls\", { urls });\r\n\r\n    // simulate multiple stages like Streamlit\r\n    setProgress(prev => [...prev, \"Text Splitter...Started...✅✅✅\"]);\r\n    await new Promise(r => setTimeout(r, 1000));\r\n\r\n    setProgress(prev => [...prev, \"Embedding Vector Started Building...✅✅✅\"]);\r\n    await new Promise(r => setTimeout(r, 1000));\r\n\r\n    setProgress(prev => [...prev, `✅ Done! Documents count: ${res.data.documents_count}`]);\r\n  } catch (error) {\r\n    console.error(error);\r\n    setProgress(prev => [...prev, \"❌ Error processing URLs. Check backend logs.\"]);\r\n  }\r\n\r\n  setLoading(false);\r\n};\r\n\r\n\r\n  // Call FastAPI to ask question\r\n  const askQuestion = async () => {\r\n    if (!question) {\r\n      alert(\"Please enter a question\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const res = await axios.post(\"http://localhost:8000/ask-question\", { question });\r\n      setAnswer(res.data.answer);\r\n      setSources(res.data.sources ? res.data.sources.split(\"\\n\") : []);\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert(\"Error fetching answer. Check your backend logs.\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ padding: 4 }}>\r\n      <Typography variant=\"h3\" gutterBottom>\r\n        StockBot: News Research Tool 📈\r\n      </Typography>\r\n\r\n      <Typography variant=\"h5\" gutterBottom>\r\n        Enter Article URLs:\r\n      </Typography>\r\n\r\n      {urls.map((url, idx) => (\r\n        <TextField\r\n          key={idx}\r\n          label={`URL ${idx + 1}`}\r\n          fullWidth\r\n          margin=\"normal\"\r\n          value={url}\r\n          onChange={(e) => handleUrlChange(idx, e.target.value)}\r\n        />\r\n      ))}\r\n\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={processUrls}\r\n        disabled={loading}\r\n        sx={{ mt: 2 }}\r\n      >\r\n        {loading ? \"Processing...\" : \"Process URLs\"}\r\n      </Button>\r\n     \r\n    <Box mt={2}>\r\n      {progress.map((msg, i) => (\r\n        <Typography key={i} variant=\"body2\">\r\n          {msg}\r\n        </Typography>\r\n      ))}\r\n    </Box>\r\n    \r\n      <Box mt={4}>\r\n        <TextField\r\n          label=\"Ask a Question\"\r\n          fullWidth\r\n          value={question}\r\n          onChange={(e) => setQuestion(e.target.value)}\r\n        />\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={askQuestion}\r\n          sx={{ mt: 2 }}\r\n          disabled={loading}\r\n        >\r\n          {loading ? \"Fetching...\" : \"Get Answer\"}\r\n        </Button>\r\n      </Box>\r\n\r\n      {answer && (\r\n        <Card sx={{ mt: 4 }}>\r\n          <CardContent>\r\n            <Typography variant=\"h6\">Answer:</Typography>\r\n            <Typography>{answer}</Typography>\r\n\r\n            {sources.length > 0 && (\r\n              <>\r\n                <Typography variant=\"subtitle1\" mt={2}>\r\n                  Sources:\r\n                </Typography>\r\n                {sources.map((src, i) => (\r\n                  <Typography key={i}>{src}</Typography>\r\n                ))}\r\n              </>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}